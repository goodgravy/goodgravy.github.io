{"componentChunkName":"component---src-templates-post-tsx","path":"/catalan-spanish-transformation/","result":{"data":{"site":{"siteMetadata":{"title":"jmsbrdy"}},"markdownRemark":{"id":"5ff9711b-69d9-52d6-8cbb-687466b47e5f","excerpt":"I’m currently learning Catalan and Spanish, and am reminded every day of the languages’ shared ancestor by how often they share similar (or identical) words. For example, it’s easy to deduce that introducción (in Spanish) means the same as introducció (in Catalan), or that respuesta and resposta are…","html":"<p>I’m currently learning Catalan and Spanish, and am reminded every day of the languages’ <a href=\"https://en.wikipedia.org/wiki/Romance_languages\">shared ancestor</a> by how often they share similar (or identical) words.</p>\n<p>For example, it’s easy to deduce that <em>introducción</em> (in Spanish) means the same as <em>introducció</em> (in Catalan), or that <em>respuesta</em> and <em>resposta</em> are the same thing.</p>\n<p>In fact, when you look at the Spanish and Catalan words next to each other, it seems that the same kinds of transformations crop up again and again: consonants becoming repeated, vowels being dropped off the ends of words, stressed vowels changing in predictable ways, …</p>\n<p>Of course, the languages are very different and often use completely distinct words, but it got me thinking: how reliably can we guess a Catalan word from a Spanish one, using just a small set of simple transformations?</p>\n<p>Well, tl;dr, you can make surprisingly informed guesses with very few rules!</p>\n<p>I put together a little test in <a href=\"https://elixir-lang.org/\">Elixir</a> to see which of these word transformations are more or less useful in guessing a Catalan word from a Spanish one.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 557px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3f283037697ad91b995ef2cc7edb9f07/30d00/esp-cat-chart-individual.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 74.84662576687117%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsSAAALEgHS3X78AAACT0lEQVQoz3VT/VMSQRj2P22mmimZyaaPX/qloSlLEuOjQoJRqLSmkhQRLRPSSZusxkJowAAHRVS44265PfZu725v2wPESHvm5r3neWef3XfnnusjhGgtqKqKMWaEVcY7TYyR0umzpq5h+hf6WJfnefEIkiQBAI5IQ5YlVYFMyrLcaICaICnY0HWNHWmZ2Qsh1BYMZrua1sNQFfG3nMSIYVi6eijtVzie59jWlpn+B6TlTm/LvmjFksSShNtXBQ4iBCE0DMM6WYaQ3REinQPq649V2NQ+ZwAH8MpPYWsXhuJ7TaT/KsntiXru3NYi1AOxSlXA3kj5gFcfRsp7NcU/d1iooMkEl9ttjs6Uu8Mfm9k8xNB4gD1T5ZqA/fMHVaAFFmr7DTP4bON3gR97tJjdyIeW6paZnDBrWOEgcfnX9zJbHt/a7mbW60ns5HZcFxyb8eTj8/ZULDHqW6FCmfSO3h6bAEqHLj8pToSc14LFN6+cNlc+Ouu+5E7HPvhs9zLL3x+csdPUcmst6TEjCDhMHdfHCy+fj9x4WpyOjFwZzc+/cw+4N5m5/246ue7uv08zq6eY2yffGQgUJsKOq2PFyJTD5s3PxZ0XnanoovfcrfTSl+GzgzTz6RSzpqI6psGhqdLs9Pjw29L7hfHBye3kcvh2OJtYfWH359Z+hG8GaO6rZTZ7zVZ0db3OCWpTBmIDIyTWgYoQEFq1LipIEeuC0Rvs44Sx6LLfgRArt6ZpMsJ2ZBkirZZBGNVPprCv9emtpZ1MU7OT7G6+u/WffFH6B08vKZT/1MxNAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Efficacy of different Spanish to Catalan transformations\"\n        title=\"Efficacy of different Spanish to Catalan transformations\"\n        src=\"/static/3f283037697ad91b995ef2cc7edb9f07/30d00/esp-cat-chart-individual.png\"\n        srcset=\"/static/3f283037697ad91b995ef2cc7edb9f07/222b7/esp-cat-chart-individual.png 163w,\n/static/3f283037697ad91b995ef2cc7edb9f07/ff46a/esp-cat-chart-individual.png 325w,\n/static/3f283037697ad91b995ef2cc7edb9f07/30d00/esp-cat-chart-individual.png 557w\"\n        sizes=\"(max-width: 557px) 100vw, 557px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Efficacy of different Spanish to Catalan transformations</figcaption>\n  </figure></p>\n<p>The two series represent the two data sources I was working with: <a href=\"https://es.wikibooks.org/wiki/Catal%C3%A1n/Diccionario_castellano-catal%C3%A1n\">Wikibooks</a> and this <a href=\"http://cit.iec.cat/LMC/default.asp?opcio=0\">lexicon of construction terminology</a>. Please excuse the anæmic and peculiar data sources: it was nigh on impossible to find a good mapping from Spanish words to Catalan, or vice versa. More on that later.</p>\n<h2 id=\"transformations\" style=\"position:relative;\"><a href=\"#transformations\" aria-label=\"transformations permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Transformations</h2>\n<p>In the “No translation” base case (applying no transformations whatsoever), we can see that somewhere around 10–12% of Spanish words are already exactly equivalent to their Catalan counterparts (depending on data set).</p>\n<p>I then applied <a href=\"https://github.com/goodgravy/translate/blob/c5ea1dc90a709cd5dbfa77d1f39a03c818ee536f/lib/translate/transformers.ex#L5-L9\">these five transformations</a> and tested how much of a difference they made:</p>\n<ul>\n<li><code class=\"language-text\">ue_to_o</code>: replace <em>ue</em> with <em>o</em> (e.g. <em>respuesta</em> → <em>resposta</em>)</li>\n<li><code class=\"language-text\">ie_to_e</code>: replace <em>ie</em> with <em>e</em> (e.g. <em>siento</em> → <em>sento</em>)</li>\n<li><code class=\"language-text\">ion_to_io</code>: replace <em>ión at the end of a word with _ió</em> (e.g. <em>introducción</em> → <em>introducció</em>)</li>\n<li><code class=\"language-text\">drop_o</code>: get rid of <em>o</em> at the end of a word (e.g. <em>agosto</em> → <em>agost</em>)</li>\n<li><code class=\"language-text\">drop_e</code>: get rid of <em>e</em> at the end of a word (e.g. <em>verde</em> → <em>verd</em>)</li>\n</ul>\n<p>Some of the transformations (e.g. <code class=\"language-text\">ie_to_e</code>) are only marginally effective, whereas others are surprisingly useful (e.g. <code class=\"language-text\">drop_e</code> letters which boosts similarity by 4 or 5% in absolute terms).</p>\n<p>Applied one after another, these five simple transformations increase the word similarity from 14% to 25% for the Wikibooks data, and from 9% to 14% for the construction data!</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 557px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d2665fbcdb0cac7460d11beecdc47501/30d00/esp-cat-chart-cumulative.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 74.84662576687117%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsSAAALEgHS3X78AAABQklEQVQoz5VTWXbDIAzM/Y+axiwGgwAhOoCdpaUflf0UGSTNjCC3WmvOOaU0/QymISYiBER9vTVpn3YrpWzbppTa990Yo7W21iKww5TW3jtsPTYFGJaWC6Md4l6Mnxjj/FiaC6w9h9RhE2Wtzf3rjna9WERmJwR1mFwGntbnPZQqeGqvhpRwOJBxjpk7cggB0bMAaVyFEhuXXShYkfZs96kZS5A9dw5ikDS+aF985JQvLRB16pKfxdDMXI7I7sgAfEdgomJV0Y+yG1BfIOMY3gYGJrkmqhTZaLZaErVfhM9ilOEw+6Di0RGAY3V/na05nWMYw1xo7gcwkMegsmByQ9n5ymv4fxZj2u3Fe+RdqbNGVsx7MWiXYTjwp1+uLAaGPRw1LiMo4OosPXaRtkCGYGTAz/bzns1/yGw9/Zr2ZNX+b9/v+3Q4WhCGfgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Cumulative efficacy of Spanish to Catalan transformations\"\n        title=\"Cumulative efficacy of Spanish to Catalan transformations\"\n        src=\"/static/d2665fbcdb0cac7460d11beecdc47501/30d00/esp-cat-chart-cumulative.png\"\n        srcset=\"/static/d2665fbcdb0cac7460d11beecdc47501/222b7/esp-cat-chart-cumulative.png 163w,\n/static/d2665fbcdb0cac7460d11beecdc47501/ff46a/esp-cat-chart-cumulative.png 325w,\n/static/d2665fbcdb0cac7460d11beecdc47501/30d00/esp-cat-chart-cumulative.png 557w\"\n        sizes=\"(max-width: 557px) 100vw, 557px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Cumulative efficacy of Spanish to Catalan transformations</figcaption>\n  </figure></p>\n<h2 id=\"how-reliable-are-these-results-for-real-texts\" style=\"position:relative;\"><a href=\"#how-reliable-are-these-results-for-real-texts\" aria-label=\"how reliable are these results for real texts permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How reliable are these results for real texts?</h2>\n<p>The main challenge with this experiment was getting my hands on clean data – as is often the case.</p>\n<p>The Wikibooks data is very limited, only containing about 700 words and lots of proper nouns. As for the construction lexicon, firstly it contains lots of multi-word phrases (on which this word-by-word transformation is ineffective) and secondly, it naturally includes <strong>lots</strong> of trade jargon.</p>\n<p>Also, it’s notable that neither data source includes verb conjugations, which I think would be rich pickings for the vowel transformation rules. It’s <strong>very</strong> common for Spanish irregular verbs to smush a stressed vowel into a pair of vowels.</p>\n<h2 id=\"elixir-as-an-implementation-language\" style=\"position:relative;\"><a href=\"#elixir-as-an-implementation-language\" aria-label=\"elixir as an implementation language permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Elixir as an implementation language</h2>\n<p>Originally, I wanted to use Elixir for two reasons:</p>\n<ol>\n<li>I’ve greatly enjoyed using it for work and play before, and want to keep my hand in</li>\n<li>Pattern matching sits at the very core of the language philosophy and I was hoping it would be convenient for this sort of pattern matching task</li>\n</ol>\n<p>In reality, #1 has proven to be true. I love the language, tooling, and community, and I’m looking forward to using it even more.</p>\n<p>#2 turned out <strong>not</strong> to apply. The vast majority of the time I spent was in looking for and subsequently cleaning the data. The majority of the Elixir code I wrote was to handle the application of the transformations, and measuring accuracy in a convenient way.</p>\n<p>The actual transformations themselves were literally <a href=\"https://github.com/goodgravy/translate/blob/c5ea1dc90a709cd5dbfa77d1f39a03c818ee536f/lib/translate/transformers.ex#L5-L9\">those five lines of code</a>. Testament to the power of Elixir, but not really a game-changing choice for how tidy this part of the implementation was.</p>\n<h2 id=\"next-steps-to-try\" style=\"position:relative;\"><a href=\"#next-steps-to-try\" aria-label=\"next steps to try permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Next steps to try</h2>\n<p>I kept this short and sweet as a starting point, but there’s lots more to experiment with here if I have a chance:</p>\n<ul>\n<li>more transformations (e.g. I just noticed that <code class=\"language-text\">~r/ado$/</code> → <em>at</em> is a common pattern)</li>\n<li>scrape <a href=\"http://www.verbs.cat/en/\">verbs.cat</a> and conflate with <a href=\"http://users.ipfw.edu/jehle/VERBLIST.HTM\">Fred Jehle’s Spanish conjugations</a> in order to test the transformations on conjugated verbs</li>\n<li>implement a statistic based on the <a href=\"https://en.wikipedia.org/wiki/Levenshtein_distance\">Levenshtein edit distance</a> rather than exact matches</li>\n<li>track which transformations <strong>harm</strong> accuracy along with the benefits they bring – what’s the best order to apply the transformations in to prevent “cannibalisation”?</li>\n<li>could a machine learning approach be used, where it learns a set of rules from the training data rather than me ham-fisting them together?</li>\n<li>«your idea here: <a href=\"https://twitter.com/goodgravy\">digues-me!</a>»</li>\n</ul>\n<h2 id=\"disclaimer\" style=\"position:relative;\"><a href=\"#disclaimer\" aria-label=\"disclaimer permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Disclaimer</h2>\n<p>Obviously, I’m not promoting this as a good or sensible way to translate language. However, being able to make informed guesses what a Catalan word might be when I know the Spanish equivalent has been incredibly helpful in the real world.</p>\n<p>As it happens, just yesterday a Catalan friend – who doesn’t speak Spanish day-to-day – was telling us that while he was on vacation in the south, he had referred to bread as <em>pano</em>, rather than <em>pan</em>. He had taken the Catalan word <em>pa</em> and mis-applied the trailing-O rule (the transformation that I found to be most effective). It goes to show that even native speakers have a set of imperfect heuristics  for how to get from one language to another!</p>","frontmatter":{"title":"It it possible to guess Catalan words?","description":null,"keywords":["tech","elixir"],"coverImage":null}}},"pageContext":{"slug":"/catalan-spanish-transformation/"}}}