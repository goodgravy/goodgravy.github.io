<!DOCTYPE html>
<html lang="">
  <head>
    
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="generator" content="Hugo 0.69.2 with theme Tranquilpeak 0.4.7-BETA">
<meta name="author" content="James Brady">
<meta name="keywords" content="video, scrubbing, content-aware, media">
<meta name="description" content="Don&rsquo;t video player controls seem dumb?
Desktop and web-based players alike allow the user to jump forwards or backwards by 5 or 10 seconds, or possibly speed up and slow down playback. These controls operate identically no matter what the user is watching – there&rsquo;s no connection between the content of the video, and the controls.
DVDs were the first format I know of that allowed you to skip via chapters, but even something as basic as those coarse-grained content-aware controls aren&rsquo;t available in things like YouTube videos today.
Here&rsquo;s an idea for how to identify the salient points in a video that a user might want to skip to: the good news is that this could all be done automatically, and with very little overhead; I&rsquo;ll leave the bad news to the end!">


<meta property="og:description" content="Don&rsquo;t video player controls seem dumb?
Desktop and web-based players alike allow the user to jump forwards or backwards by 5 or 10 seconds, or possibly speed up and slow down playback. These controls operate identically no matter what the user is watching – there&rsquo;s no connection between the content of the video, and the controls.
DVDs were the first format I know of that allowed you to skip via chapters, but even something as basic as those coarse-grained content-aware controls aren&rsquo;t available in things like YouTube videos today.
Here&rsquo;s an idea for how to identify the salient points in a video that a user might want to skip to: the good news is that this could all be done automatically, and with very little overhead; I&rsquo;ll leave the bad news to the end!">
<meta property="og:type" content="article">
<meta property="og:title" content="#showerthought: skip to next scene in video?">
<meta name="twitter:title" content="#showerthought: skip to next scene in video?">
<meta property="og:url" content="https://jmsbrdy.com/skip-to-next-scene/">
<meta property="twitter:url" content="https://jmsbrdy.com/skip-to-next-scene/">
<meta property="og:site_name" content="jmsbrdy.com">
<meta property="og:description" content="Don&rsquo;t video player controls seem dumb?
Desktop and web-based players alike allow the user to jump forwards or backwards by 5 or 10 seconds, or possibly speed up and slow down playback. These controls operate identically no matter what the user is watching – there&rsquo;s no connection between the content of the video, and the controls.
DVDs were the first format I know of that allowed you to skip via chapters, but even something as basic as those coarse-grained content-aware controls aren&rsquo;t available in things like YouTube videos today.
Here&rsquo;s an idea for how to identify the salient points in a video that a user might want to skip to: the good news is that this could all be done automatically, and with very little overhead; I&rsquo;ll leave the bad news to the end!">
<meta name="twitter:description" content="Don&rsquo;t video player controls seem dumb?
Desktop and web-based players alike allow the user to jump forwards or backwards by 5 or 10 seconds, or possibly speed up and slow down playback. These controls operate identically no matter what the user is watching – there&rsquo;s no connection between the content of the video, and the controls.
DVDs were the first format I know of that allowed you to skip via chapters, but even something as basic as those coarse-grained content-aware controls aren&rsquo;t available in things like YouTube videos today.
Here&rsquo;s an idea for how to identify the salient points in a video that a user might want to skip to: the good news is that this could all be done automatically, and with very little overhead; I&rsquo;ll leave the bad news to the end!">
<meta property="og:locale" content="en">

  
    <meta property="article:published_time" content="2018-12-05T16:14:41">
  
  
    <meta property="article:modified_time" content="2018-12-05T16:14:41">
  
  
  
  
    
      <meta property="article:tag" content="tech">
    
      <meta property="article:tag" content="video">
    
  


<meta name="twitter:card" content="summary">

  <meta name="twitter:site" content="@goodgravy">


  <meta name="twitter:creator" content="@goodgravy">






  <meta property="og:image" content="https://res.cloudinary.com/dshgddh17/c_lfill,h_280,w_280/jmsbrdy.com/clapperboard.png">
  <meta property="twitter:image" content="https://res.cloudinary.com/dshgddh17/c_lfill,h_280,w_280/jmsbrdy.com/clapperboard.png">


  <meta property="og:image" content="https://res.cloudinary.com/dshgddh17/jmsbrdy.com/black-lodge.jpg">
  <meta property="twitter:image" content="https://res.cloudinary.com/dshgddh17/jmsbrdy.com/black-lodge.jpg">




  <meta property="og:image" content="https://www.gravatar.com/avatar/363e08c01d9caf37d45bf6e5a011421b?s=640">
  <meta property="twitter:image" content="https://www.gravatar.com/avatar/363e08c01d9caf37d45bf6e5a011421b?s=640">


    <title>#showerthought: skip to next scene in video?</title>

    <link rel="icon" href="/favicon.ico">
    

    

    <link rel="canonical" href="https://jmsbrdy.com/skip-to-next-scene/">

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/jquery.fancybox.min.css" integrity="sha256-vuXZ9LGmmwtjqFX1F+EKin1ThZMub58gKULUyf0qECk=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/helpers/jquery.fancybox-thumbs.min.css" integrity="sha256-SEa4XYAHihTcEP1f5gARTB2K26Uk8PsndQYHQC1f4jU=" crossorigin="anonymous" />
    
    
    <link rel="stylesheet" href="/css/style-twzjdbqhmnnacqs0pwwdzcdbt8yhv8giawvjqjmyfoqnvazl0dalmnhdkvp7.min.css" />
    
    

    
      
    
    
  </head>

  <body>
    <div id="blog">
      <header id="header" data-behavior="4">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="header-title">
    <a class="header-title-link" href="/">jmsbrdy.com</a>
  </div>
  
    
      <a class="header-right-picture "
         href="/#about">
    
    
    
      
        <img class="header-picture" src="https://www.gravatar.com/avatar/363e08c01d9caf37d45bf6e5a011421b?s=90" alt="" />
      
    
    </a>
  
</header>

      <nav id="sidebar" data-behavior="4">
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <a href="/#about">
          <img class="sidebar-profile-picture" src="https://www.gravatar.com/avatar/363e08c01d9caf37d45bf6e5a011421b?s=110" alt="" />
        </a>
        <h4 class="sidebar-profile-name">James Brady</h4>
        
          <h5 class="sidebar-profile-bio">I&rsquo;m a software engineer by trade and an woodworker for fun. I like hard problems and learning new things with which solve them. I&rsquo;m learning to speak Catalan. I like hiking up hills and mountain biking down them. I play the trumpet poorly. That is all.</h5>
        
      </div>
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="/">
    
      <i class="sidebar-button-icon fa fa-lg fa-home"></i>
      
      <span class="sidebar-button-desc">Home</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="/#about">
    
      <i class="sidebar-button-icon fa fa-lg fa-question"></i>
      
      <span class="sidebar-button-desc">About</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://github.com/goodgravy" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-github"></i>
      
      <span class="sidebar-button-desc">GitHub</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="http://linkedin.com/in/goodgravy" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-linkedin"></i>
      
      <span class="sidebar-button-desc">LinkedIn</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      

    </ul>
  </div>
</nav>

      
  <div class="post-header-cover
              text-left
              post-header-cover--partial"
       style="background-image:url('https://res.cloudinary.com/dshgddh17/jmsbrdy.com/black-lodge.jpg')"
       data-behavior="4">
    
  </div>


      <div id="main" data-behavior="4"
        class="hasCover
               hasCoverMetaOut
               ">
        <article class="post" itemscope itemType="http://schema.org/BlogPosting">
          
          
            <div class="post-header main-content-wrap text-left">
  
    <h1 class="post-title" itemprop="headline">
      #showerthought: skip to next scene in video?
    </h1>
  
  
  <div class="postShorten-meta post-meta">
    
    
  </div>

</div>
          
          <div class="post-content markdown" itemprop="articleBody">
            <div class="main-content-wrap">
              <p>Don&rsquo;t video player controls seem dumb?</p>
<p>Desktop and web-based players alike allow the user to jump forwards or backwards by 5 or 10 seconds, or possibly speed up and slow down playback. These controls operate identically no matter what the user is watching – there&rsquo;s no connection between the <strong>content</strong> of the video, and the controls.</p>
<p>DVDs were the first format I know of that allowed you to skip via <strong>chapters</strong>, but even something as basic as those coarse-grained content-aware controls aren&rsquo;t available in things like YouTube videos today.</p>
<p>Here&rsquo;s an idea for how to identify the salient points in a video that a user might want to skip to: the good news is that this could all be done automatically, and with very little overhead; I&rsquo;ll leave the bad news to the end!</p>
<h1 id="video-compression-how-does-it-work">Video compression – how does it work?</h1>
<p>The short answer is: I don&rsquo;t know, but that&rsquo;s never stopped me before so…</p>
<p>A key concept in video encoding is <em>frame types</em>. Each <em>frame</em> (a single image in the video) can either be a <em>key frame</em> or an <em>inter frame</em>. Key frames are easy to understand – they are just a picture, stored as something like a JPEG we&rsquo;re all familiar with.</p>
<p>Inter frames are where things get interesting. The idea is that for the <strong>vast</strong> majority of video content, frame N is pretty similar to frame N-1 (and frame N+1 for that matter). Using this fact, it&rsquo;s possible to store frame N in a <strong>much</strong> more compact way by representing it as a delta on its neighbouring frames. Interestingly, this so-called inter framing is why colours and shapes can appear to erroneously &ldquo;smear&rdquo; over a second or two of video if the video file is damaged or incomplete. The decoder gets confused and can propagate forward corruption from one frame into subsequent frames.</p>



<div class="figure " >
  
    <img class="fig-img"
    
      srcset="
        https://res.cloudinary.com/dshgddh17/w_375/jmsbrdy.com/ipb.png 375w,
        https://res.cloudinary.com/dshgddh17/w_750/jmsbrdy.com/ipb.png 750w,
        https://res.cloudinary.com/dshgddh17/w_1000/jmsbrdy.com/ipb.png 1000w,
        https://res.cloudinary.com/dshgddh17/w_1500/jmsbrdy.com/ipb.png 1500w"
      src="https://res.cloudinary.com/dshgddh17/w_750/jmsbrdy.com/ipb.png"
    
     alt="In this diagram, the green **I** frames are the key frames. The blue and red **B** and **P** frames are different types of inter frames."
    >
  
   
    <span class="caption">In this diagram, the green <strong>I</strong> frames are the key frames. The blue and red <strong>B</strong> and <strong>P</strong> frames are different types of inter frames.</span>
  
</div>


<p>Video encoders support automatic insertion of key frames when they detect a significant delta between two frames – e.g. across scene changes. The thinking here is that if two adjacent frames are quite dissimilar, there&rsquo;s no benefit in calculating delta and using an inter frame: we might as well store the first frame of the new scene as a key frame.</p>
<h1 id="what-does-this-have-to-do-with-skipping-video">What does this have to do with skipping video?</h1>
<p>One consequence of this mix of key frames and inter frames in a video is that we have indicators as to when scene change events are happening. The video encoder is using these events internally, to decide between key or inter frames, but I think they also enable a content-aware skip feature.</p>
<p>When we hit the &ldquo;skip forward&rdquo; button, imagine the video jumps ahead to the next key frame – rather than 5 or 10 seconds into the future. If those key frames are aligned with scene changes, you get per-scene skipping basically for free.</p>
<p>Imagine how expensive it would be to have a human manually add cue points to video, demarcating every scene change? For a platform like YouTube – where 400+ hours of video are uploaded every second – this is beyond impossible.</p>
<p>Almost as a side-effect, the video encoding process builds up an understanding of transition points where one frame is very dissimilar to the last – because it wants to insert key frames there. If we save the locations of those key frames as metadata alongside the encoded video, we have everything we need to power a more intelligent skipping feature.</p>
<p>To improve on this, rather than saving just the key frame locations, we could also save the similarity between frames at those points. With that data, the skipping feature could be finer grained (stopping at every single key frame) or coarser grained (only stopping at key frames where a huge delta was detected).</p>
<h1 id="sounds-great-lets-do-it-why-wont-it-work">Sounds great, let&rsquo;s do it! Why won&rsquo;t it work?</h1>
<p>A couple of reasons:</p>
<h2 id="sometimes-frames-change-a-lot-during-a-single-scene">Sometimes frames change a lot during a single scene</h2>
<p>For example, suppose the hero steps out into the sunshine. Or there&rsquo;s a massive explosion. Or somebody turns a bedside light on. The examples go on and on where we – as humans – understand there&rsquo;s a contiguous flow to the content, but our poor old video encoder probably thinks that these two frames have very little to do with each other.</p>
<p>On the other hand, perhaps this isn&rsquo;t such a huge problem: the <strong>majority</strong> of scenes do consist of gradually changing frames, so although it&rsquo;s easy to come up with counter examples, in the general case it&rsquo;s still workable<sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup>.</p>
<h2 id="most-video-encoders-dont-use-automatic-key-frame-insertion">Most video encoders don&rsquo;t use automatic key frame insertion</h2>
<p><strong>This</strong> is the real problem. The majority of video that we watch nowadays is a) streamed and b) variable bit rate, and that&rsquo;s <a href="https://video.ibm.com/blog/streaming-video-tips/keyframes-interframe-video-compression/#auto">not a good fit</a> for auto key framing.</p>
<p>Honestly, I&rsquo;m not familiar enough with adaptive streaming technology to say <strong>why</strong> it&rsquo;s dependent upon evenly-spaced key frames, but I can tell by instinct it would make things much more straightforward. There certainly doesn&rsquo;t seem to be an easy way to apply an inter frame at one resolution on top of a key frame at another. For that reason, ensuring that the various steams&rsquo; key frames are in sync – so we can switch between streams at key frame boundaries – seems like a great choice. The even-spacing: I&rsquo;m not so sure why that is important…</p>
<p>Perhaps at some point in the future, dependence on evenly-spaced, in-sync key frames will go away, and we can revisit using the key frame spacing to power user features like this, rather than just as an internal video encoding detail!</p>
<section class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1" role="doc-endnote">
<p>One interesting point here: what about scenes where the camera is panning? From one frame to another, there could be quite low pixel-by-pixel similarity as everything is shifting left to right. Luckily, modern video encoding also has all sorts of incredibly clever object tracking functionality, so objects moving across the screen – or even the whole shot panning – can be represented in a way which still appears to be a small delta. <a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</section>
              
            </div>
          </div>
          <div id="post-footer" class="post-footer main-content-wrap">
            
              
                
                
                  <div class="post-footer-tags">
                    <span class="text-color-light text-small"></span><br/>
                    
  <a class="tag tag--primary tag--small" href="/tags/tech/">tech</a>

  <a class="tag tag--primary tag--small" href="/tags/video/">video</a>

                  </div>
                
              
            
            <div class="post-actions-wrap">
  
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="/ynabadell/" data-tooltip="ynabadell: connect your Sabadell bank account with YNAB">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml"></span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="/innodb-and-table-level-locking/" data-tooltip="InnoDB and Table-level Locking">
              
                  <span class="hide-xs hide-sm text-small icon-mr"></span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
      
      
      <li class="post-action">
        
          <a class="post-action-btn btn btn--default" href="#">
        
          <i class="fa fa-list"></i>
        </a>
      </li>
    </ul>
  
</div>

            
              
            
          </div>
        </article>
        <footer id="footer" class="main-content-wrap">
  <span class="copyrights">
    &copy; 2020 James Brady. 
  </span>
</footer>

      </div>
      <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
        <div class="post-actions-wrap">
  
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="/ynabadell/" data-tooltip="ynabadell: connect your Sabadell bank account with YNAB">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml"></span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="/innodb-and-table-level-locking/" data-tooltip="InnoDB and Table-level Locking">
              
                  <span class="hide-xs hide-sm text-small icon-mr"></span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
      
      
      <li class="post-action">
        
          <a class="post-action-btn btn btn--default" href="#">
        
          <i class="fa fa-list"></i>
        </a>
      </li>
    </ul>
  
</div>

      </div>
      <div id="share-options-bar" class="share-options-bar" data-behavior="4">
  <i id="btn-close-shareoptions" class="fa fa-close"></i>
  <ul class="share-options">
    
  </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>
    </div>
    
    <div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fa fa-remove"></i>
    </div>
    
      <img id="about-card-picture" src="https://www.gravatar.com/avatar/363e08c01d9caf37d45bf6e5a011421b?s=110" alt="" />
    
    <h4 id="about-card-name">James Brady</h4>
    
      <div id="about-card-bio">I&rsquo;m a software engineer by trade and an woodworker for fun. I like hard problems and learning new things with which solve them. I&rsquo;m learning to speak Catalan. I like hiking up hills and mountain biking down them. I play the trumpet poorly. That is all.</div>
    
    
      <div id="about-card-job">
        <i class="fa fa-briefcase"></i>
        <br/>
        <a href="https://teespring.com">Teespring</a>
      </div>
    
    
      <div id="about-card-location">
        <i class="fa fa-map-marker"></i>
        <br/>
        Oristà: a teeny tiny village in Catalunya
      </div>
    
  </div>
</div>

    

    
  
    
      
      <div id="cover" style="background-image:url('https://jmsbrdy.com/images/sebastia.jpg');"></div>
    
  


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.7/js/jquery.fancybox.min.js" integrity="sha256-GEAnjcTqVP+vBp3SSc8bEDQqvWAZMiHyUSIorrWwH50=" crossorigin="anonymous"></script>


<script src="/js/script-pcw6v3xilnxydl1vddzazdverrnn9ctynvnxgwho987mfyqkuylcb1nlt.min.js"></script>


<script lang="javascript">
window.onload = updateMinWidth;
window.onresize = updateMinWidth;
document.getElementById("sidebar").addEventListener("transitionend", updateMinWidth);
function updateMinWidth() {
  var sidebar = document.getElementById("sidebar");
  var main = document.getElementById("main");
  main.style.minWidth = "";
  var w1 = getComputedStyle(main).getPropertyValue("min-width");
  var w2 = getComputedStyle(sidebar).getPropertyValue("width");
  var w3 = getComputedStyle(sidebar).getPropertyValue("left");
  main.style.minWidth = `calc(${w1} - ${w2} - ${w3})`;
}
</script>


  
    
  




    
  </body>
</html>

