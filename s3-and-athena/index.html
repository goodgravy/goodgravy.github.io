<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:112.5%/1.6666666666666667 'Merriweather',serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.8);font-family:'Merriweather',serif;font-weight:300;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.66667rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.66667rem;color:hsla(0,0%,0%,1);font-family:'Roboto Condensed',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:2rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.66667rem;color:hsla(0,0%,0%,1);font-family:'Roboto Condensed',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1.51572rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.66667rem;color:hsla(0,0%,0%,1);font-family:'Roboto Condensed',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1.31951rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.66667rem;color:hsla(0,0%,0%,1);font-family:'Roboto Condensed',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.66667rem;color:hsla(0,0%,0%,1);font-family:'Roboto Condensed',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:0.87055rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.66667rem;color:hsla(0,0%,0%,1);font-family:'Roboto Condensed',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:0.81225rem;line-height:1.1;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.66667rem;}ul{margin-left:1.66667rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.66667rem;list-style-position:outside;list-style-image:none;list-style:disc;}ol{margin-left:1.66667rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.66667rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.66667rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.66667rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.66667rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.66667rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.66667rem;font-size:0.85rem;line-height:1.66667rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.66667rem;font-size:1rem;line-height:1.66667rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.66667rem;}blockquote{margin-left:0;margin-right:1.66667rem;margin-top:0;padding-bottom:0;padding-left:1.35417rem;padding-right:0;padding-top:0;margin-bottom:1.66667rem;font-size:1.1487rem;line-height:1.66667rem;color:hsla(0,0%,0%,1);font-style:italic;border-left:0.3125rem solid hsla(0,0%,0%,0.2);}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.66667rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.66667rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.66667rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.66667rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.66667rem;}b{font-weight:700;}strong{font-weight:700;}dt{font-weight:700;}th{font-weight:700;}li{margin-bottom:calc(1.66667rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.66667rem;margin-bottom:calc(1.66667rem / 2);margin-top:calc(1.66667rem / 2);}li > ul{margin-left:1.66667rem;margin-bottom:calc(1.66667rem / 2);margin-top:calc(1.66667rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.66667rem / 2);}code{font-size:0.85rem;line-height:1.66667rem;}kbd{font-size:0.85rem;line-height:1.66667rem;}samp{font-size:0.85rem;line-height:1.66667rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.11111rem;padding-right:1.11111rem;padding-top:0.83333rem;padding-bottom:calc(0.83333rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}a{color:#e51937;text-decoration:none;}a:hover,a:active{color:hsla(0,0%,0%,0.8);text-decoration:none;}blockquote > :last-child{margin-bottom:0;}blockquote cite{font-size:1rem;line-height:1.66667rem;color:hsla(0,0%,0%,0.8);font-weight:300;}blockquote cite:before{content:"— ";}@media only screen and (max-width:480px){ul,ol{margin-left:1.66667rem;}blockquote{margin-left:-1.25rem;margin-right:0;padding-left:0.9375rem;}}h5,h6{text-transform:uppercase;font-style:italic;}</style><style data-href="/styles.493e6315ef3a09bc2f74.css">code[class*=language-],pre[class*=language-]{color:#000;background:none;text-shadow:0 1px #fff;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:#9a6e3a;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}</style><meta name="generator" content="Gatsby 2.21.37"/><style type="text/css">
    .anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="canonical" href="https://jmsbrdy.com/s3-and-athena/" data-baseprotocol="https:" data-basehost="jmsbrdy.com"/><link rel="icon" href="/favicon-32x32.png?v=7817fac09bb6b51fe0c5161e5cfc1f88"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#663399"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=7817fac09bb6b51fe0c5161e5cfc1f88"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=7817fac09bb6b51fe0c5161e5cfc1f88"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=7817fac09bb6b51fe0c5161e5cfc1f88"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=7817fac09bb6b51fe0c5161e5cfc1f88"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=7817fac09bb6b51fe0c5161e5cfc1f88"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=7817fac09bb6b51fe0c5161e5cfc1f88"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=7817fac09bb6b51fe0c5161e5cfc1f88"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=7817fac09bb6b51fe0c5161e5cfc1f88"/><link rel="preconnect dns-prefetch" href="https://www.google-analytics.com"/><title data-react-helmet="true">Using Athena, S3, and Tableau to quickly extract and visualise inaccessible data | jmsbrdy</title><meta data-react-helmet="true" name="description" content="We use Fivetran and Snowflake for our ETL system and data warehouse at Teespring. They work well for the vast majority of our use cases, but we recently ran into an urgent problem where those tools couldn’t help. This is the story of how we solved the issue with Athena and S3."/><meta data-react-helmet="true" property="og:title" content="Using Athena, S3, and Tableau to quickly extract and visualise inaccessible data"/><meta data-react-helmet="true" property="og:description" content="We use Fivetran and Snowflake for our ETL system and data warehouse at Teespring. They work well for the vast majority of our use cases, but we recently ran into an urgent problem where those tools couldn’t help. This is the story of how we solved the issue with Athena and S3."/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:title" content="Using Athena, S3, and Tableau to quickly extract and visualise inaccessible data"/><meta data-react-helmet="true" name="twitter:description" content="We use Fivetran and Snowflake for our ETL system and data warehouse at Teespring. They work well for the vast majority of our use cases, but we recently ran into an urgent problem where those tools couldn’t help. This is the story of how we solved the issue with Athena and S3."/><meta data-react-helmet="true" name="twitter:creator" content="James Brady"/><meta data-react-helmet="true" name="theme-color" content="#49579C"/><meta data-react-helmet="true" name="msapplication-navbutton-color" content="#49579C"/><meta data-react-helmet="true" name="apple-mobile-web-app-status-bar-style" content="#49579C"/><meta data-react-helmet="true" name="keywords" content="aws, athena, s3, etl, tableau, sql, tech, aws, data, devops, databases"/><style data-styled="" data-styled-version="5.1.1">.bcMPWx{height:78px;}/*!sc*/
.bcMPWx a.home{padding:0 30px;position:fixed;z-index:10;}/*!sc*/
.bcMPWx ul{padding:0 36px 0 100px;text-align:right;list-style-type:none;text-align:right;height:78px;}/*!sc*/
.bcMPWx li:last-child{margin-right:0px;}/*!sc*/
.bcMPWx li{display:inline-block;margin-left:16px;margin-right:16px;margin-top:0px !important;font-size:120%;line-height:78px;}/*!sc*/
.bcMPWx li a{color:black;background:none;}/*!sc*/
@media (max-width:760px){.bcMPWx a.home{padding-left:calc(15px - 10px);position:inherit;float:left;}.bcMPWx ul{padding-right:15px;}}/*!sc*/
data-styled.g1[id="sc-AxjAm"]{content:"bcMPWx,"}/*!sc*/
.bJCmFu{padding:10px;background-color:hsla(0,100%,100%,50%);line-height:0;}/*!sc*/
data-styled.g2[id="sc-AxirZ"]{content:"bJCmFu,"}/*!sc*/
.eSwYtm{overflow:hidden;}/*!sc*/
data-styled.g4[id="sc-AxhCb"]{content:"eSwYtm,"}/*!sc*/
.fxWvvr{padding:0 36px 36px;text-align:right;}/*!sc*/
data-styled.g5[id="sc-AxhUy"]{content:"fxWvvr,"}/*!sc*/
.cVmQYF{margin-left:13vw;width:560px;}/*!sc*/
@media (max-width:760px){.cVmQYF{margin-left:2vw;margin-right:2vw;width:94vw;min-width:300px;}}/*!sc*/
data-styled.g6[id="sc-AxgMl"]{content:"cVmQYF,"}/*!sc*/
.dteCCc{width:100vw;position:relative;left:50%;right:50%;margin-left:-50vw;margin-right:-50vw;height:25em;}/*!sc*/
data-styled.g10[id="sc-fzozJi"]{content:"dteCCc,"}/*!sc*/
.fYZyZu{position:absolute;width:100%;height:100%;z-index:-10;}/*!sc*/
data-styled.g11[id="sc-fzoLsD"]{content:"fYZyZu,"}/*!sc*/
html{box-sizing:border-box;margin:0;padding:0;}/*!sc*/
*,*::before,*::after{box-sizing:inherit;}/*!sc*/
body{margin:0 !important;padding:0;}/*!sc*/
::selection{background-color:#dad9d9;color:rgba(0,0,0,0.70);}/*!sc*/
a.anchor,a.anchor:hover,a.anchor:link{background:none !important;}/*!sc*/
figure a.gatsby-resp-image-link{background:none;}/*!sc*/
figure span.gatsby-resp-image-wrapper{max-width:100% !important;}/*!sc*/
body{background-color:white;}/*!sc*/
h1{margin-top:4rem;margin-bottom:1.5rem;line-height:1;}/*!sc*/
h2{margin-top:2.1rem;margin-bottom:1.4rem;line-height:1;}/*!sc*/
h3{margin-top:2rem;margin-bottom:1.4rem;}/*!sc*/
hr{display:block;height:1px;width:55%;border:0;border-top:1px solid #ccc;margin:1em 0;padding:0;}/*!sc*/
section{padding-top:1rem;padding-bottom:1rem;}/*!sc*/
p,ol,ul{line-height:2rem;}/*!sc*/
p{margin-top:1.4rem;margin-bottom:1.4rem;padding-right:0;vertical-align:baseline;}/*!sc*/
blockquote::before{font-family:Arial;content:"“";color:hsl(230,50%,45%);font-size:4em;position:absolute;left:10px;top:-10px;}/*!sc*/
blockquote{margin:50px 0 50px;font-style:italic;color:#555555;padding:1.2em 30px 1.2em 75px;border-left:8px solid hsl(230,50%,45%);line-height:1.6;position:relative;background:#EDEDED;}/*!sc*/
blockquote::after{content:'';}/*!sc*/
blockquote p{margin-right:20px;}/*!sc*/
blockquote footer{font-size:1.1rem;text-align:right;font-style:normal;}/*!sc*/
section > p,section > footer,section > table{width:55%;}/*!sc*/
section > ol,section > ul{width:50%;-webkit-padding-start:5%;}/*!sc*/
li:not(:first-child){margin-top:0.25rem;}/*!sc*/
figure{padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline;-webkit-margin-start:0;-webkit-margin-end:0;margin:0 auto 3em auto;max-width:640px;}/*!sc*/
figcaption{margin-top:0;margin-bottom:0;font-size:1.1rem;font-style:italic;line-height:1.6;vertical-align:baseline;}/*!sc*/
figure.fullwidth figcaption{margin-right:24%;}/*!sc*/
a{color:hsl(230,50%,45%);}/*!sc*/
a:visited{color:hsl(230,50%,30%);}/*!sc*/
img{max-width:100%;}/*!sc*/
table.fullwidth{width:100%;}/*!sc*/
.fullwidth{left:50%;margin-left:-50vw;margin-right:-50vw;max-width:100vw;position:relative;right:50%;width:100vw;}/*!sc*/
div.fullwidth figure{float:left;}/*!sc*/
div.fullwidth figure.five{width:19%;margin-left:1%;}/*!sc*/
div.fullwidth figure.four{width:24%;margin-left:1%;}/*!sc*/
div.table-wrapper{overflow-x:auto;}/*!sc*/
code{font-family:Consolas,'Liberation Mono',Menlo,Courier,monospace;font-size:1rem;line-height:1.42;}/*!sc*/
h1 > code,h2 > code,h3 > code{font-size:0.8em;}/*!sc*/
pre.code{font-size:0.9rem;width:52.5%;margin-left:2.5%;overflow-x:auto;}/*!sc*/
pre.code.fullwidth{width:90%;}/*!sc*/
.fullwidth{clear:both;}/*!sc*/
.iframe-wrapper{position:relative;padding-bottom:56.25%;padding-top:25px;height:0;}/*!sc*/
.iframe-wrapper iframe{position:absolute;top:0;left:0;width:100%;height:100%;}/*!sc*/
.image-cropper{width:100px;height:100px;position:relative;overflow:hidden;border-radius:50%;}/*!sc*/
.profile-pic{display:inline;margin:0 auto;height:100%;width:auto;}/*!sc*/
@media (max-width:760px){hr,section > p,section > footer,section > table{width:100%;}pre.code{width:97%;}section > ol{width:90%;}section > ul{width:90%;}figure{max-width:90%;}div.fullwidth{width:100%;position:inherit;margin:0;}div.fullwidth figure{width:100% !important;}figcaption,figure.fullwidth figcaption{margin-right:0%;max-width:none;}blockquote{width:90%;margin-left:1.5em;margin-right:0em;}blockquote p,blockquote footer{width:100%;}label.margin-toggle:not(.sidenote-number){display:inline;}label{cursor:pointer;}div.table-wrapper,table{width:85%;}img{width:100%;}}/*!sc*/
data-styled.g12[id="sc-global-fGjwcy1"]{content:"sc-global-fGjwcy1,"}/*!sc*/
</style><link href="//fonts.googleapis.com/css?family=Merriweather:300,300i,400,400i,700,700i|Roboto+Condensed:400,400i,700,700i" rel="stylesheet" type="text/css"/><link as="script" rel="preload" href="/webpack-runtime-a2119300eacf3d814604.js"/><link as="script" rel="preload" href="/framework-75da9754c2a76bbaf08a.js"/><link as="script" rel="preload" href="/styles-0088909554f7ad2ac065.js"/><link as="script" rel="preload" href="/app-278da34b9eb9e285e23f.js"/><link as="script" rel="preload" href="/commons-7df25ebdc38476cb854e.js"/><link as="script" rel="preload" href="/component---src-templates-post-tsx-aa749063319650da7a69.js"/><link as="fetch" rel="preload" href="/page-data/s3-and-athena/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="layout"><nav class="sc-AxjAm bcMPWx navigation"><a class="home" href="/"><div class="sc-AxirZ bJCmFu"><div class="sc-AxiKw eSbheu gatsby-image-wrapper" style="position:relative;overflow:hidden;display:inline-block;width:40px;height:58px"><img aria-hidden="true" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAdCAYAAACqhkzFAAAACXBIWXMAAAsSAAALEgHS3X78AAAB/UlEQVRIx62WyytEURzH753xCiEhTVnJiiihWHgtZOEPkFHIOyw0hUlEyoIFWVjMlmTrsbC3mDUbeaUkb2XlkRjfk+/VcZpz73D96tPM3PM933vPOb/f745hfEU+eAOv4AncgivwCF44FuH4OdgCgyDP0EQaGAULYB0802APLIMZMAwmwAq45rjQjRgxxAEntNtohqgRBHjNKwvigIcXDyns5Vgix73KpFnqLkGG7s6mZNgT7c7S72Jpf2vdGJr8zOYBCm3TfxneU1vtxtDDzxLqhGlmLIbWocTzukmzBF4fp25JuZHWsNMmbRqoEdp0ZSu0hgEuN4dLygUVTJc7sAqSpbTTLvlUSlod+2CA+2g4LfmYk0TNBll602CK30PSKgSbfHrHQ2l1KNFGVolV9ylOhn1S6XklPNIBVLMLCf3kX/NQLcEd6sNuDa2TnaP+JJpILOfol4ZT1B/rDE8o6IrRcNFuyUJ0RkGHjaEpHUxYKcEfkQoulLRJ4JNbDViuihZq30FhtJbkAw9OTZPRJiV3v6FpSaVSFxZVUQ9qQBWoA34wL+3zDWiO1hysffJTaL1WP5Qa/uCrdpftLU1Xx9a+rHHiBrtMESgHlaAMFIAkTYJ/h9Uwy7i5ERrYhUkjUyfwSW0rqLxaVWwjC3TzL4cwGzNcRohG2+zGruITo3ifHRx9c8UAAAAASUVORK5CYII=" alt="" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/static/5cce81fe4b36fe8136fb1bf7f02bc636/0efb1/jb.png 1x,
/static/5cce81fe4b36fe8136fb1bf7f02bc636/1b595/jb.png 1.5x,
/static/5cce81fe4b36fe8136fb1bf7f02bc636/34ca5/jb.png 2x" /><img loading="lazy" width="40" height="58" srcset="/static/5cce81fe4b36fe8136fb1bf7f02bc636/0efb1/jb.png 1x,
/static/5cce81fe4b36fe8136fb1bf7f02bc636/1b595/jb.png 1.5x,
/static/5cce81fe4b36fe8136fb1bf7f02bc636/34ca5/jb.png 2x" src="/static/5cce81fe4b36fe8136fb1bf7f02bc636/0efb1/jb.png" alt="" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></div></a><ul><li><a href="/tags/">Tags</a></li><li><a href="/about/">About</a></li></ul></nav><main class="sc-AxhCb eSwYtm content" role="main"><header><div class="sc-fzozJi dteCCc"><div class="sc-fzoLsD fYZyZu gatsby-image-wrapper" style="position:relative;overflow:hidden"><div aria-hidden="true" style="width:100%;padding-bottom:77.8%"></div><img aria-hidden="true" src="data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAQABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAgABBP/EABUBAQEAAAAAAAAAAAAAAAAAAAMC/9oADAMBAAIQAxAAAAHqBKGbZI//xAAaEAACAgMAAAAAAAAAAAAAAAAAAQIREiEi/9oACAEBAAEFAuh5UOTN0f/EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABURAQEAAAAAAAAAAAAAAAAAABBB/9oACAECAQE/Aaf/xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAY/Al//xAAbEAADAAIDAAAAAAAAAAAAAAAAARExURAhQf/aAAgBAQABPyF6qFKyiseTLmfXi1x//9oADAMBAAIAAwAAABCED//EABURAQEAAAAAAAAAAAAAAAAAAAEQ/9oACAEDAQE/EBEZ/8QAFREBAQAAAAAAAAAAAAAAAAAAARD/2gAIAQIBAT8QRBP/xAAcEAEAAwEAAwEAAAAAAAAAAAABABEhMUFRkcH/2gAIAQEAAT8Q2Ct5b/IMgXRzkUbVgNdFPyYDg4cRPc//2Q==" alt="Cover image" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/static/c1748fc7a83b385378bcc42aa4352813/0f3a1/athena.jpg 500w,
/static/c1748fc7a83b385378bcc42aa4352813/a7715/athena.jpg 1000w,
/static/c1748fc7a83b385378bcc42aa4352813/a41d1/athena.jpg 2000w,
/static/c1748fc7a83b385378bcc42aa4352813/2f304/athena.jpg 2848w" sizes="(max-width: 2000px) 100vw, 2000px" /><img loading="lazy" sizes="(max-width: 2000px) 100vw, 2000px" srcset="/static/c1748fc7a83b385378bcc42aa4352813/0f3a1/athena.jpg 500w,
/static/c1748fc7a83b385378bcc42aa4352813/a7715/athena.jpg 1000w,
/static/c1748fc7a83b385378bcc42aa4352813/a41d1/athena.jpg 2000w,
/static/c1748fc7a83b385378bcc42aa4352813/2f304/athena.jpg 2848w" src="/static/c1748fc7a83b385378bcc42aa4352813/a41d1/athena.jpg" alt="Cover image" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></div></header><article class="sc-AxgMl cVmQYF body"><h1 class="page-header">Using Athena, S3, and Tableau to quickly extract and visualise inaccessible data</h1><div><p>We use <a href="https://fivetran.com/">Fivetran</a> and <a href="https://www.snowflake.com/">Snowflake</a> for our ETL system and data warehouse at Teespring. They work well for the vast majority of our use cases, but we recently ran into an urgent problem where those tools couldn’t help. This is the story of how we solved the issue with Athena and S3.</p>
<!-- excerpt -->
<h2 id="telemetry-data-in-our-production-facilities" style="position:relative;"><a href="#telemetry-data-in-our-production-facilities" aria-label="telemetry data in our production facilities permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Telemetry data in our production facilities</h2>
<p>We gather a large amount of data about the flow of work through our production facilities. Who scanned which QR codes at what time? Which press was used by which person during what period, and how many items did they produce? What are our inventory levels for each SKU in each locations, and how many SKUs have been picked and are ready to enter the next phase of fulfillment?</p>
<p>We use those data internally to inform our decisions within the facility itself, but the data stays within the private network of the building – we had never needed to hook it out to Fivetran, Snowflake, Tableau, etc. to create dashboards for broader consumption.</p>
<p>When we saw that efficiency had dropped at our Kentucky plant, we therefore didn’t have all of the data available in our usual analysis tools – it was trapped within the plant’s private network.</p>
<h2 id="liberating-the-inaccessible-data" style="position:relative;"><a href="#liberating-the-inaccessible-data" aria-label="liberating the inaccessible data permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Liberating the inaccessible data</h2>
<p>We had a few options to be able to munge and understand the data from our plant. These included:</p>
<h4 id="option-1-punching-a-hole-through-the-plant-firewall-and-allowing-fivetran-to-extract-data-directly-from-the-databases" style="position:relative;"><a href="#option-1-punching-a-hole-through-the-plant-firewall-and-allowing-fivetran-to-extract-data-directly-from-the-databases" aria-label="option 1 punching a hole through the plant firewall and allowing fivetran to extract data directly from the databases permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Option #1: Punching a hole through the plant firewall and allowing Fivetran to extract data directly from the databases.</h4>
<p>This is recommended against <a href="https://fivetran.com/docs/databases/mysql/setup-guide#allowportaccess">by Fivetran themselves</a> due to load on the master database.</p>
<h4 id="option-2-setting-up-a-read-replica-outside-of-the-firewall-and-allowing-fivetran-to-pull-data-from-there" style="position:relative;"><a href="#option-2-setting-up-a-read-replica-outside-of-the-firewall-and-allowing-fivetran-to-pull-data-from-there" aria-label="option 2 setting up a read replica outside of the firewall and allowing fivetran to pull data from there permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Option #2: Setting up a read replica outside of the firewall, and allowing Fivetran to pull data from there.</h4>
<p>To me this is pretty clearly <em>the right option</em> here, but unfortunately it didn’t work for us in this case. Setting up a new read replica in RDS is easy enough, but we knew from past experience that dumping all the data out of the plant’s databases, loading that into the new replica, and having the replication catch-up would mean several hours of downtime. Our facility is running 24/7 at maximum capacity at the moment (hence why fixing this efficiency problem was so urgent!): hours of downtime was unacceptable.</p>
<h4 id="option-3-setting-up-new-tooling-inside-the-firewall-to-extract-and-analyse-the-data-there-rather-than-in-tableau" style="position:relative;"><a href="#option-3-setting-up-new-tooling-inside-the-firewall-to-extract-and-analyse-the-data-there-rather-than-in-tableau" aria-label="option 3 setting up new tooling inside the firewall to extract and analyse the data there rather than in tableau permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Option #3: Setting up new tooling <strong>inside</strong> the firewall to extract and analyse the data there, rather than in Tableau.</h4>
<p>Workable, but stinks. We want to correlate these data with other information already in Tableau, and create holistic dashboards: we need these data out from behind the firewall.</p>
<h4 id="option-4-shuttle-the-data-out-of-the-facility-and-have-it-end-up-in-tableau-through-some-other-means" style="position:relative;"><a href="#option-4-shuttle-the-data-out-of-the-facility-and-have-it-end-up-in-tableau-through-some-other-means" aria-label="option 4 shuttle the data out of the facility and have it end up in tableau through some other means permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Option #4: Shuttle the data out of the facility and have it end up in Tableau through some other means.</h4>
<p>So we’re left with this option… Despite my initial wariness, it was actually a good fit for our particular situation for a couple of reasons:</p>
<ul>
<li>We only care about recent data – stretching back a few weeks up to today. So, exporting the data and sending it somewhere outside the private network wasn’t a crazy idea.</li>
<li>We only cared about a narrow subset of the data – the production rate on the presses – so again, this made the manual export more reasonable.</li>
<li>It turns out that Tableau <a href="https://www.tableau.com/about/blog/2017/5/connect-your-s3-data-amazon-athena-connector-tableau-103-71105">can pull data from Athena</a>, and Athena can pull from a wide variety of <a href="https://docs.aws.amazon.com/athena/latest/ug/work-with-data-stores.html">data sources</a>, in a variety of <a href="https://docs.aws.amazon.com/athena/latest/ug/serde-reference.html">data formats</a>. Athena was the key piece of technology that opened our eyes to the possibility of exporting data in a basic format (like CSV), getting it out of the private network, and still being able to work with it in really powerful ways.</li>
</ul>
<h2 id="setting-up-athena" style="position:relative;"><a href="#setting-up-athena" aria-label="setting up athena permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Setting up Athena</h2>
<p>AWS claim that<sup id="fnref-1"><a href="#fn-1" class="footnote-ref">1</a></sup>:</p>
<blockquote>
<p>Amazon Athena is an interactive query service that makes it easy to analyze data directly in Amazon Simple Storage Service (Amazon S3) using standard SQL. With a few actions in the AWS Management Console, you can point Athena at your data stored in Amazon S3 and begin using standard SQL to run ad-hoc queries and get results in seconds.</p>
</blockquote>
<p>Now I like marketing claims as much as anyone, but the thing is: <strong>this is actually true</strong>☝️. In my mental model, text files lying around in S3 are <em>so far</em> away from relational databases that I assumed there would be a painful setup process, or a confusing configuration step, or severe limitations on real-world use cases.</p>
<p>However, for us, it was truly as simple as dropping the CSVs into a bucket, manually creating a matching table schema (automatic data discovery and schema inference <a href="https://docs.aws.amazon.com/glue/latest/dg/add-crawler.html">is available</a>), and starting to run SQL queries against the data in those CSVs.</p>
<p>Here’s the <code class="language-text">CREATE TABLE</code> statement which Athena creates automatically for you:</p>
<div class="gatsby-highlight" data-language="sql"><pre class="language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> EXTERNAL <span class="token keyword">TABLE</span> <span class="token punctuation">`</span>press_impressions<span class="token punctuation">`</span><span class="token punctuation">(</span>
  <span class="token punctuation">`</span>start_time<span class="token punctuation">`</span> <span class="token keyword">timestamp</span><span class="token punctuation">,</span> 
  <span class="token punctuation">`</span>press_id<span class="token punctuation">`</span> <span class="token keyword">int</span><span class="token punctuation">,</span> 
  <span class="token punctuation">`</span>press_name<span class="token punctuation">`</span> string<span class="token punctuation">,</span> 
  <span class="token punctuation">`</span>operator_name<span class="token punctuation">`</span> string<span class="token punctuation">,</span> 
  <span class="token punctuation">`</span>impression_count<span class="token punctuation">`</span> <span class="token keyword">int</span><span class="token punctuation">)</span>
<span class="token keyword">ROW</span> FORMAT DELIMITED 
  <span class="token keyword">FIELDS</span> <span class="token keyword">TERMINATED</span> <span class="token keyword">BY</span> <span class="token string">','</span> 
STORED <span class="token keyword">AS</span> INPUTFORMAT 
  <span class="token string">'org.apache.hadoop.mapred.TextInputFormat'</span> 
OUTPUTFORMAT 
  <span class="token string">'org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat'</span>
LOCATION
  <span class="token string">'s3://out-bucket/data/our-folder'</span></code></pre></div>
<h2 id="hooking-it-all-together" style="position:relative;"><a href="#hooking-it-all-together" aria-label="hooking it all together permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Hooking it all together</h2>
<p>From here, it was as simple as creating a new Athena connection in Tableau and all of the data was available to to our analysts. We could create charts and dashboards in our usual tool chain, correlated against other metrics from other data sources, and quickly understand how to boost efficiency.</p>
<p><figure class="gatsby-resp-image-figure" style="">
    <span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/7e32e561349d41f29b873079501658a8/a9965/athena-diagram.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 69.93865030674846%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsSAAALEgHS3X78AAADAElEQVQ4y2NIKe3VzKqa5J1V2ccVm9/JW9w4lbekaTpnRFYre1ROG6dXZC6jup45g5i6A4O6kSODkp4tXsyQWTXRI7mkN4cBCCKyWoQZoKCkYRJTeGYzFwM54NXL5xFPnjxuBLGfPX3a9OzZsxiwoS2z2Y0dAjmVdG04VK0smTTsLZiBrmBSBmJFINY0sGbK8zRhbQwyZVXUs2NS1LWFGPjw4aP9Dx8+/A8ErE+fPv3/+PHjbTDLHLwjSu29wqpBbE35EA4lXWsOBR0bDhVdKw5RbUd2mDplXRtuZX1bCP/58xfxL1++bAQaCDT8YQuQHQ0S75m3k9XcOUDa3jVGIO0/A5NjjzIfss+Ayhn2x8pZXs3TDLb0CGEW17BhY2ieuZMNKMcKxNxAzIisITq3nV3DwQVsq16itJZts7InEzMzh5oQDzhsWz3ULG/VOf9/3mJ3FMR3s3fkYMhpWsRmbu3ALS0tLcTIyCipoqLCB3IpCGQ3zGNT1rPkBdrDIaLLzi9rzy8PFGY254RYGK4lwz4/UjfnZo2FAYhvY2HNzhCSUssBdRAP1KVwUDt1B6u4rJqIqLwquzBDOND1KkwqhvbMKqYeTHqmTswMwWdAykA+YHRz9WaX0QIaGJXdyp5aO59JXF5LQ1hKiRekgpGRSQRIyRjZePGKyaryqRg6sasY2rKrWzqwK+nZsQNjmR0YMey6pg7sjoaagoHurpyy2rYcagZ2zAzJZZPYzF3D2eS1LeTFZNWFwOYxMqmCfGDmGMgL8z4ewILCSyqdxK6kYQQSlEGSBHlDpHb6blbf2BImkICWmTs8N9SlQ9Lbn1WabJMqfQ0iKvvEQfzU8nwGBmD2Yo8A5oigpCqO4OQazvDMJo7wjCaOxJIJ7MCcwwNkg2MeKA53xKaIQDC9LzSQZ2Oyr7d3XK0WiJ+XCswPgUmVDHGFPYyFnasYk8omMwINAWOgASCaAZIlm4Fh3QY3cAKDFCQdArG5goMKg7wbDzhWFVwIZ8vwjEas4hghCw1rAJeL083d9c4gAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Architecture: the script, S3, Athena, and Tableau"
        title="Architecture: the script, S3, Athena, and Tableau"
        src="/static/7e32e561349d41f29b873079501658a8/a6d36/athena-diagram.png"
        srcset="/static/7e32e561349d41f29b873079501658a8/222b7/athena-diagram.png 163w,
/static/7e32e561349d41f29b873079501658a8/ff46a/athena-diagram.png 325w,
/static/7e32e561349d41f29b873079501658a8/a6d36/athena-diagram.png 650w,
/static/7e32e561349d41f29b873079501658a8/e548f/athena-diagram.png 975w,
/static/7e32e561349d41f29b873079501658a8/a9965/athena-diagram.png 1171w"
        sizes="(max-width: 650px) 100vw, 650px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span>
    <figcaption class="gatsby-resp-image-figcaption">Architecture: the script, S3, Athena, and Tableau</figcaption>
  </figure></p>
<p>One note: we are trying to move to user-less authentication and authorization in IAM as much as possible, so it would be nice to have a role-based access option in Tableau, but it’s not a deal-breaker for us.</p>
<p>Overall, I must admit I went into this project with great trepidation. I was already thinking about how I would manually generate charts from the exported CSV data if Athena turned out not to be as straightforward as it purported to be. However, I was pleasantly surprised – pleasantly astounded – that within minutes, it proved the marketing claims true: you just point it at an S3 bucket and you get a SQL interface back.</p>

      <div class="footnotes">
        <hr/>
        <ol >
    
    <li class="footnote-list-item" id="fn-1" >
          
        <p class="footnote-paragraph" style="display:inline; "><a href="https://docs.aws.amazon.com/athena/latest/ug/what-is.html">https://docs.aws.amazon.com/athena/latest/ug/what-is.html</a></p>
      <a href="#fnref-1" class="footnote-backref" style="display:inline;">
        ↟
      </a>
    
      </li>
      
    </ol></div></div></article></main><footer class="sc-AxhUy fxWvvr footer">© <!-- -->2020<!-- -->,<!-- --> <a href="https://jmsbrdy.com">jmsbrdy.com</a>. Built with<!-- --> <a href="https://www.gatsbyjs.org">Gatsby</a></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-9836486-2', 'auto', {});
      
      
      
      
      
      }</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/s3-and-athena/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-278da34b9eb9e285e23f.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-835fb30047976a3f5f9b.js"],"component---src-pages-about-tsx":["/component---src-pages-about-tsx-23647d73e99a00f5426b.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-cb110edbc0d491584d2a.js"],"component---src-pages-tags-tsx":["/component---src-pages-tags-tsx-162da0d775ad94fcdb49.js"],"component---src-templates-post-tsx":["/component---src-templates-post-tsx-aa749063319650da7a69.js"],"component---src-templates-tag-tsx":["/component---src-templates-tag-tsx-79f099da7811f4883382.js"]};/*]]>*/</script><script src="/component---src-templates-post-tsx-aa749063319650da7a69.js" async=""></script><script src="/commons-7df25ebdc38476cb854e.js" async=""></script><script src="/app-278da34b9eb9e285e23f.js" async=""></script><script src="/styles-0088909554f7ad2ac065.js" async=""></script><script src="/framework-75da9754c2a76bbaf08a.js" async=""></script><script src="/webpack-runtime-a2119300eacf3d814604.js" async=""></script></body></html>