<!DOCTYPE html>
<html lang="">
  <head>
    
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="generator" content="Hugo 0.69.2 with theme Tranquilpeak 0.4.7-BETA">
<meta name="author" content="James Brady">
<meta name="keywords" content="tech">
<meta name="description" content="I&rsquo;m currently learning Catalan and Spanish, and am reminded every day of the languages&rsquo; shared ancestor by how often they share similar (or identical) words.
For example, it&rsquo;s easy to deduce that introducción (in Spanish) means the same as introducció (in Catalan), or that respuesta and resposta are the same thing.
In fact, when you look at the Spanish and Catalan words next to each other, it seems that the same kinds of transformations crop up again and again: consonants becoming repeated, vowels being dropped off the ends of words, stressed vowels changing in predictable ways, …
Of course, the languages are very different and often use completely distinct words, but it got me thinking: how reliably can we guess a Catalan word from a Spanish one, using just a small set of simple transformations?">


<meta property="og:description" content="I&rsquo;m currently learning Catalan and Spanish, and am reminded every day of the languages&rsquo; shared ancestor by how often they share similar (or identical) words.
For example, it&rsquo;s easy to deduce that introducción (in Spanish) means the same as introducció (in Catalan), or that respuesta and resposta are the same thing.
In fact, when you look at the Spanish and Catalan words next to each other, it seems that the same kinds of transformations crop up again and again: consonants becoming repeated, vowels being dropped off the ends of words, stressed vowels changing in predictable ways, …
Of course, the languages are very different and often use completely distinct words, but it got me thinking: how reliably can we guess a Catalan word from a Spanish one, using just a small set of simple transformations?">
<meta property="og:type" content="article">
<meta property="og:title" content="It it possible to guess Catalan words?">
<meta name="twitter:title" content="It it possible to guess Catalan words?">
<meta property="og:url" content="https://jmsbrdy.com/it-it-possible-to-guess-catalan-words/">
<meta property="twitter:url" content="https://jmsbrdy.com/it-it-possible-to-guess-catalan-words/">
<meta property="og:site_name" content="jmsbrdy.com">
<meta property="og:description" content="I&rsquo;m currently learning Catalan and Spanish, and am reminded every day of the languages&rsquo; shared ancestor by how often they share similar (or identical) words.
For example, it&rsquo;s easy to deduce that introducción (in Spanish) means the same as introducció (in Catalan), or that respuesta and resposta are the same thing.
In fact, when you look at the Spanish and Catalan words next to each other, it seems that the same kinds of transformations crop up again and again: consonants becoming repeated, vowels being dropped off the ends of words, stressed vowels changing in predictable ways, …
Of course, the languages are very different and often use completely distinct words, but it got me thinking: how reliably can we guess a Catalan word from a Spanish one, using just a small set of simple transformations?">
<meta name="twitter:description" content="I&rsquo;m currently learning Catalan and Spanish, and am reminded every day of the languages&rsquo; shared ancestor by how often they share similar (or identical) words.
For example, it&rsquo;s easy to deduce that introducción (in Spanish) means the same as introducció (in Catalan), or that respuesta and resposta are the same thing.
In fact, when you look at the Spanish and Catalan words next to each other, it seems that the same kinds of transformations crop up again and again: consonants becoming repeated, vowels being dropped off the ends of words, stressed vowels changing in predictable ways, …
Of course, the languages are very different and often use completely distinct words, but it got me thinking: how reliably can we guess a Catalan word from a Spanish one, using just a small set of simple transformations?">
<meta property="og:locale" content="en">

  
    <meta property="article:published_time" content="2017-08-25T15:06:22">
  
  
    <meta property="article:modified_time" content="2017-08-25T15:06:22">
  
  
  
  


<meta name="twitter:card" content="summary">

  <meta name="twitter:site" content="@goodgravy">


  <meta name="twitter:creator" content="@goodgravy">






  <meta property="og:image" content="https://res.cloudinary.com/dshgddh17/c_lfill,h_280,w_280/jmsbrdy.com/esp-cat-flag.png">
  <meta property="twitter:image" content="https://res.cloudinary.com/dshgddh17/c_lfill,h_280,w_280/jmsbrdy.com/esp-cat-flag.png">





  <meta property="og:image" content="https://www.gravatar.com/avatar/363e08c01d9caf37d45bf6e5a011421b?s=640">
  <meta property="twitter:image" content="https://www.gravatar.com/avatar/363e08c01d9caf37d45bf6e5a011421b?s=640">


    <title>It it possible to guess Catalan words?</title>

    <link rel="icon" href="/favicon.ico">
    

    

    <link rel="canonical" href="https://jmsbrdy.com/it-it-possible-to-guess-catalan-words/">

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/jquery.fancybox.min.css" integrity="sha256-vuXZ9LGmmwtjqFX1F+EKin1ThZMub58gKULUyf0qECk=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/helpers/jquery.fancybox-thumbs.min.css" integrity="sha256-SEa4XYAHihTcEP1f5gARTB2K26Uk8PsndQYHQC1f4jU=" crossorigin="anonymous" />
    
    
    <link rel="stylesheet" href="/css/style-twzjdbqhmnnacqs0pwwdzcdbt8yhv8giawvjqjmyfoqnvazl0dalmnhdkvp7.min.css" />
    
    

    
      
    
    
  </head>

  <body>
    <div id="blog">
      <header id="header" data-behavior="4">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="header-title">
    <a class="header-title-link" href="/">jmsbrdy.com</a>
  </div>
  
    
      <a class="header-right-picture "
         href="/#about">
    
    
    
      
        <img class="header-picture" src="https://www.gravatar.com/avatar/363e08c01d9caf37d45bf6e5a011421b?s=90" alt="" />
      
    
    </a>
  
</header>

      <nav id="sidebar" data-behavior="4">
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <a href="/#about">
          <img class="sidebar-profile-picture" src="https://www.gravatar.com/avatar/363e08c01d9caf37d45bf6e5a011421b?s=110" alt="" />
        </a>
        <h4 class="sidebar-profile-name">James Brady</h4>
        
          <h5 class="sidebar-profile-bio">I&rsquo;m a software engineer by trade and an woodworker for fun. I like hard problems and learning new things with which solve them. I&rsquo;m learning to speak Catalan. I like hiking up hills and mountain biking down them. I play the trumpet poorly. That is all.</h5>
        
      </div>
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="/">
    
      <i class="sidebar-button-icon fa fa-lg fa-home"></i>
      
      <span class="sidebar-button-desc">Home</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="/#about">
    
      <i class="sidebar-button-icon fa fa-lg fa-question"></i>
      
      <span class="sidebar-button-desc">About</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://github.com/goodgravy" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-github"></i>
      
      <span class="sidebar-button-desc">GitHub</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="http://linkedin.com/in/goodgravy" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-linkedin"></i>
      
      <span class="sidebar-button-desc">LinkedIn</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      

    </ul>
  </div>
</nav>

      

      <div id="main" data-behavior="4"
        class="
               hasCoverMetaIn
               ">
        <article class="post" itemscope itemType="http://schema.org/BlogPosting">
          
          
            <div class="post-header main-content-wrap text-left">
  
    <h1 class="post-title" itemprop="headline">
      It it possible to guess Catalan words?
    </h1>
  
  
  <div class="postShorten-meta post-meta">
    
    
  </div>

</div>
          
          <div class="post-content markdown" itemprop="articleBody">
            <div class="main-content-wrap">
              <p>I&rsquo;m currently learning Catalan and Spanish, and am reminded every day of the languages&rsquo; <a href="https://en.wikipedia.org/wiki/Romance_languages">shared ancestor</a> by how often they share similar (or identical) words.</p>
<p>For example, it&rsquo;s easy to deduce that <em>introducción</em> (in Spanish) means the same as <em>introducció</em> (in Catalan), or that <em>respuesta</em> and <em>resposta</em> are the same thing.</p>
<p>In fact, when you look at the Spanish and Catalan words next to each other, it seems that the same kinds of transformations crop up again and again: consonants becoming repeated, vowels being dropped off the ends of words, stressed vowels changing in predictable ways, …</p>
<p>Of course, the languages are very different and often use completely distinct words, but it got me thinking: how reliably can we guess a Catalan word from a Spanish one, using just a small set of simple transformations?</p>
<p>Well, tl;dr, you can make surprisingly informed guesses with very few rules!</p>
<p>I put together a little test in <a href="https://elixir-lang.org/">Elixir</a> (which you <strong>have</strong> to try if you&rsquo;ve not already – I love it) to see which of these word transformations are more or less useful in guessing a Catalan word from a Spanish one.</p>



<div class="figure " >
  
    <img class="fig-img"
    
      srcset="
        https://res.cloudinary.com/dshgddh17/w_375/jmsbrdy.com/esp-cat-chart-individual.png 375w,
        https://res.cloudinary.com/dshgddh17/w_750/jmsbrdy.com/esp-cat-chart-individual.png 750w,
        https://res.cloudinary.com/dshgddh17/w_1000/jmsbrdy.com/esp-cat-chart-individual.png 1000w,
        https://res.cloudinary.com/dshgddh17/w_1500/jmsbrdy.com/esp-cat-chart-individual.png 1500w"
      src="https://res.cloudinary.com/dshgddh17/w_750/jmsbrdy.com/esp-cat-chart-individual.png"
    
     alt="Efficacy of different Spanish to Catalan transformations"
    >
  
   
    <span class="caption">Efficacy of different Spanish to Catalan transformations</span>
  
</div>


<p>The two series represent the two data sources I was working with: <a href="https://es.wikibooks.org/wiki/Catal%C3%A1n/Diccionario_castellano-catal%C3%A1n">Wikibooks</a> and this <a href="http://cit.iec.cat/LMC/default.asp?opcio=0">lexicon of construction terminology</a>. Please excuse the anæmic and peculiar data sources: it was nigh on impossible to find a good mapping from Spanish words to Catalan, or vice versa. More on that later.</p>
<h2 id="transformations">Transformations</h2>
<p>In the &ldquo;No translation&rdquo; base case (applying no transformations whatsoever), we can see that somewhere around 10–12% of Spanish words are already exactly equivalent to their Catalan counterparts (depending on data set).</p>
<p>I then applied <a href="https://github.com/goodgravy/translate/blob/c5ea1dc90a709cd5dbfa77d1f39a03c818ee536f/lib/translate/transformers.ex#L5-L9">these five transformations</a> and tested how much of a difference they made:</p>
<ul>
<li><code>ue_to_o</code>: replace <em>ue</em> with <em>o</em> (e.g. <em>respuesta</em> → <em>resposta</em>)</li>
<li><code>ie_to_e</code>: replace <em>ie</em> with <em>e</em> (e.g. <em>siento</em> → <em>sento</em>)</li>
<li><code>ion_to_io</code>: replace _ión at the end of a word with <em>ió</em> (e.g. <em>introducción</em> → <em>introducció</em>)</li>
<li><code>drop_o</code>: get rid of <em>o</em> at the end of a word (e.g. <em>agosto</em> → <em>agost</em>)</li>
<li><code>drop_e</code>: get rid of <em>e</em> at the end of a word (e.g. <em>verde</em> → <em>verd</em>)</li>
</ul>
<p>Some of the transformations (e.g. <code>ie_to_e</code>) are only marginally effective, whereas others are surprisingly useful (e.g. <code>drop_e</code> letters which boosts similarity by 4 or 5% in absolute terms).</p>
<p>Applied one after another, these five simple transformations increase the word similarity from 14% to 25% for the Wikibooks data, and from 9% to 14% for the construction data!</p>



<div class="figure " >
  
    <img class="fig-img"
    
      srcset="
        https://res.cloudinary.com/dshgddh17/w_375/jmsbrdy.com/esp-cat-chart-cumulative.png 375w,
        https://res.cloudinary.com/dshgddh17/w_750/jmsbrdy.com/esp-cat-chart-cumulative.png 750w,
        https://res.cloudinary.com/dshgddh17/w_1000/jmsbrdy.com/esp-cat-chart-cumulative.png 1000w,
        https://res.cloudinary.com/dshgddh17/w_1500/jmsbrdy.com/esp-cat-chart-cumulative.png 1500w"
      src="https://res.cloudinary.com/dshgddh17/w_750/jmsbrdy.com/esp-cat-chart-cumulative.png"
    
     alt="Cumulative efficacy of Spanish to Catalan transformations"
    >
  
   
    <span class="caption">Cumulative efficacy of Spanish to Catalan transformations</span>
  
</div>


<h2 id="how-reliable-are-these-results-for-real-texts">How reliable are these results for real texts?</h2>
<p>The main challenge with this experiment was getting my hands on clean data – as is often the case.</p>
<p>The Wikibooks data is very limited, only containing about 700 words and lots of proper nouns. As for the construction lexicon, firstly it contains lots of multi-word phrases (on which this word-by-word transformation is ineffective) and secondly, it naturally includes <strong>lots</strong> of trade jargon.</p>
<p>Also, it&rsquo;s notable that neither data source includes verb conjugations, which I think would be rich pickings for the vowel transformation rules. It&rsquo;s a <strong>very</strong> common for Spanish irregular verbs to smush a stressed vowel into a pair of vowels.</p>
<h2 id="elixir-as-an-implementation-language">Elixir as an implementation language</h2>
<p>Originally, I wanted to use Elixir for two reasons:</p>
<ol>
<li>I&rsquo;ve greatly enjoyed using it for work and play before, and want to keep my hand in</li>
<li>pattern matching sits at the very core of the language philosophy and I was hoping it would be convenient for this sort of pattern matching task</li>
</ol>
<p>In reality, #1 has proven to be true. I love the language, tooling, and community, and I&rsquo;m looking forward to using it even more.</p>
<p>#2 turned out <strong>not</strong> to apply. The vast majority of the time I spent was in looking for and subsequently cleaning the data. The majority of the Elixir code I wrote was to handle the application of the transformations, and measuring accuracy in a convenient way.</p>
<p>The actual transformations themselves were literally <a href="https://github.com/goodgravy/translate/blob/c5ea1dc90a709cd5dbfa77d1f39a03c818ee536f/lib/translate/transformers.ex#L5-L9">those five lines of code</a>. Testament to the power of Elixir, but not really a game-changing choice for how tidy this part of the implementation was.</p>
<h2 id="next-steps-to-try">Next steps to try</h2>
<p>I kept this short and sweet as a starting point, but there&rsquo;s lots more to experiment with here if I have a chance:</p>
<ul>
<li>more transformations (e.g. I just noticed that <code>~r/ada$/</code> → <em>at</em> is a common pattern)</li>
<li>scrape <a href="http://www.verbs.cat/en/">verbs.cat</a> and conflate with <a href="http://users.ipfw.edu/jehle/VERBLIST.HTM">Fred Jehle&rsquo;s Spanish conjugations</a> in order to test the transformations on conjugated verbs</li>
<li>implement a statistic based on the <a href="https://en.wikipedia.org/wiki/Levenshtein_distance">Levenshtein edit distance</a> rather than exact matches</li>
<li>track which transformations <strong>harm</strong> accuracy along with the benefits they bring – what&rsquo;s the best order to apply the transformations in to prevent &ldquo;cannibalisation&rdquo;?</li>
<li>could a machine learning approach be used, where it learns a set of rules from the training data rather than me ham-fisting them together?</li>
<li>«your idea here: <a href="https://twitter.com/goodgravy">digues-me!</a>»</li>
</ul>
<h2 id="disclaimer">Disclaimer</h2>
<p>Obviously, I&rsquo;m not promoting this as a good or sensible way to translate language. Being able to make informed guesses what a Catalan word might be when I know the Spanish equivalent has been incredibly helpful to me: this is merely taking a thought experiment to an illogical extreme.</p>
<p>As it happens, just yesterday a Catalan friend – who doesn&rsquo;t speak Spanish day-to-day – was telling us that while he was on vacation in the south, he had referred to bread as <em>pano</em>, rather than <em>pan</em>. He had taken the Catalan word <em>pa</em> and mis-applied the trailing-O rule (the transformation that I found to be most effective). It goes to show that even native speakers have a set of rules for how to get from one language to another!</p>
              
            </div>
          </div>
          <div id="post-footer" class="post-footer main-content-wrap">
            
              
            
            <div class="post-actions-wrap">
  
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="/take-home-tests/" data-tooltip="Take Home Tests">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml"></span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="/swamp-cooler-experimenting-with-airflow/" data-tooltip="Swamp cooler: experimenting with airflow">
              
                  <span class="hide-xs hide-sm text-small icon-mr"></span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
      
      
      <li class="post-action">
        
          <a class="post-action-btn btn btn--default" href="#">
        
          <i class="fa fa-list"></i>
        </a>
      </li>
    </ul>
  
</div>

            
              
            
          </div>
        </article>
        <footer id="footer" class="main-content-wrap">
  <span class="copyrights">
    &copy; 2020 James Brady. 
  </span>
</footer>

      </div>
      <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
        <div class="post-actions-wrap">
  
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="/take-home-tests/" data-tooltip="Take Home Tests">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml"></span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="/swamp-cooler-experimenting-with-airflow/" data-tooltip="Swamp cooler: experimenting with airflow">
              
                  <span class="hide-xs hide-sm text-small icon-mr"></span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
      
      
      <li class="post-action">
        
          <a class="post-action-btn btn btn--default" href="#">
        
          <i class="fa fa-list"></i>
        </a>
      </li>
    </ul>
  
</div>

      </div>
      <div id="share-options-bar" class="share-options-bar" data-behavior="4">
  <i id="btn-close-shareoptions" class="fa fa-close"></i>
  <ul class="share-options">
    
  </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>
    </div>
    
    <div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fa fa-remove"></i>
    </div>
    
      <img id="about-card-picture" src="https://www.gravatar.com/avatar/363e08c01d9caf37d45bf6e5a011421b?s=110" alt="" />
    
    <h4 id="about-card-name">James Brady</h4>
    
      <div id="about-card-bio">I&rsquo;m a software engineer by trade and an woodworker for fun. I like hard problems and learning new things with which solve them. I&rsquo;m learning to speak Catalan. I like hiking up hills and mountain biking down them. I play the trumpet poorly. That is all.</div>
    
    
      <div id="about-card-job">
        <i class="fa fa-briefcase"></i>
        <br/>
        <a href="https://teespring.com">Teespring</a>
      </div>
    
    
      <div id="about-card-location">
        <i class="fa fa-map-marker"></i>
        <br/>
        Oristà: a teeny tiny village in Catalunya
      </div>
    
  </div>
</div>

    

    
  
    
      
      <div id="cover" style="background-image:url('https://jmsbrdy.com/images/sebastia.jpg');"></div>
    
  


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.7/js/jquery.fancybox.min.js" integrity="sha256-GEAnjcTqVP+vBp3SSc8bEDQqvWAZMiHyUSIorrWwH50=" crossorigin="anonymous"></script>


<script src="/js/script-pcw6v3xilnxydl1vddzazdverrnn9ctynvnxgwho987mfyqkuylcb1nlt.min.js"></script>


<script lang="javascript">
window.onload = updateMinWidth;
window.onresize = updateMinWidth;
document.getElementById("sidebar").addEventListener("transitionend", updateMinWidth);
function updateMinWidth() {
  var sidebar = document.getElementById("sidebar");
  var main = document.getElementById("main");
  main.style.minWidth = "";
  var w1 = getComputedStyle(main).getPropertyValue("min-width");
  var w2 = getComputedStyle(sidebar).getPropertyValue("width");
  var w3 = getComputedStyle(sidebar).getPropertyValue("left");
  main.style.minWidth = `calc(${w1} - ${w2} - ${w3})`;
}
</script>


  
    
  




    
  </body>
</html>

